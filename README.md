## fake-data-producer

### Introduction

The Fake Data Generator is a tool that allows you to generate synthetic/fake data based on a provided configuration. It leverages the Go programming language and the gofakeit library to generate various types of data such as names, addresses, numbers, and more.

### Features

- Generate fake data for various fields including strings, numbers, addresses, etc.
- Support for custom field generators to generate specific types of data.
- Configurable options for defining the range, precision, and other properties of generated data.
- Easy-to-use JSON-based configuration file for specifying the data structure and generation options.

#### dependencies
- [confluentic-kafka-go](https://github.com/confluentinc/confluent-kafka-go): kafka client to flush data to Kafka system
- [gofakeit](https://github.com/brianvoe/gofakeit): Random data generator written in go

### Prerequisite
- docker
- go
- kafka

### Configuration

The configuration file used for data generation consists of JSON key-value pairs, where the key represents the column name and the value defines the data type and additional parameters for generating data.

#### JSON Key-Value Structure

```json
{
  "ColumnName": "DataType",
  "ColumnName2": {
    "type": "DataType",
    "min": minValue,
    "max": maxValue,
    "precision": decimalPrecision
  },
  ...
}
```

Let's break down the different components of the JSON key-value structure:

##### ColumnName
The JSON key represents the name of the column for which data needs to be generated. It is a string that uniquely identifies the column in the generated data.

##### DataType
The JSON value represents the data type of the data to be produced for the corresponding column. It can take one of the following values:

`"string"`: Generates a random string value. <br>
`"int"`: Generates a random integer value.<br>
`"float"`: Generates a random floating-point value.<br>
`"bool"`: Generates a random boolean value.<br>

For columns with simple data types like strings, integers, floats, and booleans, you only need to specify the data type as the JSON value.

##### Additional Parameters (for Complex Data Types)
For certain columns, you may want to customize the data generation by providing additional parameters. These parameters are specified as a JSON object with the following properties:

`"type"`: The data type of the column. This property is required and can have the same values as mentioned above: "string", "int", "float", or "bool". <br>
`"min"`: The minimum value allowed for the column. This property is optional and applicable only for numeric data types ("int" and "float"). It specifies the minimum value that can be generated. <br>
`"max"`: The maximum value allowed for the column. This property is optional and applicable only for numeric data types ("int" and "float"). It specifies the maximum value that can be generated. <br>
`"precision"`: The decimal precision for floating-point numbers. This property is optional and applicable only for the "float" data type. It specifies the number of decimal places to include in the generated value. <br>

By providing these additional parameters, you can define custom rules for data generation, such as specifying value ranges or decimal precision.

#### Example Configuration

```json
{
  "Name": "string",
  "Address": "string",
  "Latitude": "float",
  "Longitude": "float",
  "UnitPrice": {
    "type": "float",
    "min": 2.23,
    "max": 5.21,
    "precision": 4
  },
  "Age": {
    "type": "int",
    "min": 20,
    "max": 60
  },
  "Salary": {
    "type": "int",
    "min": 50000,
    "max": 100000
  }
}
```
In the above example:

The `"Name"` column will have randomly generated string values. <br>
The `"Address"` column will have proper address values generated by the field generator. <br>
The `"Latitude"` and `"Longitude"` columns will have proper latitude and longitude values generated by the field generator. <br>
The `"UnitPrice"` column will have randomly generated floating-point values between 2.23 and 5.21, with a precision of 4 decimal places. <br>
The `"Age"` column will have randomly generated

### Usage

The application can be run with following ways:

with `PLAINTEXT` as security-protocol:

```shell
go run main.go kafka \
    --security-protocol PLAINTEXT \
    --bootstrap-server localhost:9092 \
    --topic sampleTopic \
    --nr-messages 0 \
    --max-waiting-time 0 \
    --config-dir /config \
    --file config.json
```

with `SSL` as security-protocol:

```shell
go run main.go kafka \
    --security-protocol SSL \
    --bootstrap-server localhost:9092 \
    --topic sampleTopic \
    --nr-messages 0 \
    --max-waiting-time 0 \
    --config-dir /config \
    --file config.json
```

where

- `security-protocol` : Security protocol for Kafka (PLAINTEXT, SSL, SASL_SSL)
- `bootstrap-server` : Kafka bootstrap server
- `topic` : Topic name
- `nr-messages` : Number of messages to produce (0 for unlimited)
- `max-waiting-time` : Max waiting time between messages (0 for none) in seconds
- `config-dir` : Directory path of the config file
- `file` : Name of the config file

#### Run application via docker

```shell
docker build -t fake-data-producer .

docker run fake-data-producer kafka \ 
    --security-protocol PLAINTEXT \
    --bootstrap-server localhost:9092 \
    --topic sampleTopic \
    --nr-messages 0 \
    --max-waiting-time 0 \
    --config-dir /config \
    --file config.json
```

via **[docker-compose](docker-compose.yml)**

It runs three services:
- zookeeper
- kafka
- fake-data-producer

```shell
docker-compose -f docker-compose.yml up -d
```

![docker](images/docker-run-successfully.png)

Let's check the data:

```shell
docker exec -it kafka /bin/sh
cd opt/<kafka version>/bin
kafka-topics.sh --list --zookeeper zookeeper:218
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic sampleTopic --from-beginning
```

### Results
Based on config

```json
{
  "Name": "string",
  "Address": "string",
  "Latitude": "float",
  "Longitude": "float",
  "UnitPrice": {
    "type": "float",
    "min": 2.23,
    "max": 5.21,
    "precision": 4
  },
  "Age": {
    "type": "int",
    "min": 20,
    "max": 60
  },
  "Salary": {
    "type": "int",
    "min": 50000,
    "max": 100000
  }
}
```

This is how output looks like in kafka topics

```json lines
{"Address":"9739 Port Expressway land, Arlington, Alabama 79133","Latitude":-37.019429,"Longitude":-60.596162,"UnitPrice":2.9891,"Age":55,"Salary":93747,"Name":"Caitlyn Schoen"}
{"Address":"949 New Land stad, San Bernardino, New Hampshire 64383","Latitude":73.236759,"Longitude":-41.659942,"UnitPrice":3.7283,"Age":41,"Salary":72975,"Name":"Irving Steuber"}
{"Address":"67198 New Grove borough, Plano, Iowa 55755","Latitude":-33.937051,"Longitude":-73.97081,"UnitPrice":2.6237,"Age":52,"Salary":99421,"Name":"Freeda Fritsch"}
{"Address":"732 Brook fort, Birmingham, Oregon 21442","Latitude":19.588974,"Longitude":50.488188,"UnitPrice":4.3512,"Age":44,"Salary":92524,"Name":"Jovany Larkin"}
{"Address":"8529 New Plains ville, Boston, Texas 69697","Latitude":48.786975,"Longitude":150.901156,"UnitPrice":3.5688,"Age":37,"Salary":88505,"Name":"Wellington Walker"}
```